{% extends "layout.html" %}
{% block title %}History - GIDEON{% endblock %}
{% block content %}

<!-- History Header -->
<section class="history-header">
  <div class="container">
    <div class="history-header-content">
      <h1>Your Fitness History</h1>
      <p>Track your progress and review your AI-generated plans</p>
      <div class="history-filters">
        <select id="filterType">
          <option value="all">All Activities</option>
          <option value="workouts">Workout Plans</option>
          <option value="nutrition">Nutrition Plans</option>
        </select>
        <select id="filterTime">
          <option value="all">All Time</option>
          <option value="week">This Week</option>
          <option value="month">This Month</option>
          <option value="year">This Year</option>
        </select>
        <button id="exportHistory" class="secondary-btn">üì• Export History</button>
      </div>
    </div>
  </div>
</section>

<!-- Statistics Overview -->
<section class="history-stats container">
  <div class="stats-overview">
    <div class="overview-card">
      <div class="overview-icon">üèãÔ∏è</div>
      <div class="overview-content">
        <h3 id="totalWorkoutPlans">0</h3>
        <p>Workout Plans Created</p>
      </div>
    </div>
    
    <div class="overview-card">
      <div class="overview-icon">üçé</div>
      <div class="overview-content">
        <h3 id="totalNutritionPlans">0</h3>
        <p>Nutrition Plans Created</p>
      </div>
    </div>
    
    <div class="overview-card">
      <div class="overview-icon">üìÖ</div>
      <div class="overview-content">
        <h3 id="activeDays">0</h3>
        <p>Active Days</p>
      </div>
    </div>
    
    <div class="overview-card">
      <div class="overview-icon">üéØ</div>
      <div class="overview-content">
        <h3 id="goalsAchieved">0</h3>
        <p>Goals Achieved</p>
      </div>
    </div>
  </div>
</section>

<!-- History Timeline -->
<section class="history-timeline container">
  <h2>Recent Activity</h2>
  <div class="timeline-container">
    <div id="historyTimeline" class="timeline">
      <!-- Timeline items will be populated by JavaScript -->
      <div class="timeline-message">
        <div class="loading-spinner"></div>
        <p>Loading your fitness history...</p>
      </div>
    </div>
  </div>
</section>

<!-- Detailed History -->
<section class="detailed-history container">
  <div class="history-tabs">
    <button class="tab-btn active" onclick="showTab('workout-history')">Workout Plans</button>
    <button class="tab-btn" onclick="showTab('nutrition-history')">Nutrition Plans</button>
    <button class="tab-btn" onclick="showTab('progress-history')">Progress Tracking</button>
  </div>

  <!-- Workout History Tab -->
  <div id="workout-history" class="tab-content active">
    <div class="history-section-header">
      <h3>Workout Plans History</h3>
      <button class="create-btn" onclick="goToWorkoutPlanner()">+ Create New Workout Plan</button>
    </div>
    <div id="workoutHistoryContent" class="history-grid">
      <!-- Workout history items will be populated by JavaScript -->
    </div>
  </div>

  <!-- Nutrition History Tab -->
  <div id="nutrition-history" class="tab-content">
    <div class="history-section-header">
      <h3>Nutrition Plans History</h3>
      <button class="create-btn" onclick="goToNutritionPlanner()">+ Create New Nutrition Plan</button>
    </div>
    <div id="nutritionHistoryContent" class="history-grid">
      <!-- Nutrition history items will be populated by JavaScript -->
    </div>
  </div>

  <!-- Progress History Tab -->
  <div id="progress-history" class="tab-content">
    <div class="history-section-header">
      <h3>Progress Tracking</h3>
      <button class="create-btn" onclick="addProgressEntry()">+ Add Progress Entry</button>
    </div>
    <div class="progress-chart-container">
      <canvas id="progressChart" width="400" height="200"></canvas>
    </div>
    <div id="progressHistoryContent" class="progress-entries">
      <!-- Progress entries will be populated by JavaScript -->
    </div>
  </div>
</section>

<!-- Plan Detail Modal -->
<div id="planDetailModal" class="modal">
  <div class="modal-content plan-detail-modal">
    <span class="close" onclick="closePlanDetail()">&times;</span>
    <div id="planDetailContent">
      <!-- Plan details will be populated by JavaScript -->
    </div>
  </div>
</div>

<!-- Progress Entry Modal -->
<div id="progressModal" class="modal">
  <div class="modal-content">
    <span class="close" onclick="closeProgressModal()">&times;</span>
    <h2>Add Progress Entry</h2>
    <form id="progressForm">
      <div class="form-group">
        <label>Date</label>
        <input type="date" id="progressDate" required>
      </div>
      
      <div class="form-group">
        <label>Weight (kg)</label>
        <input type="number" id="progressWeight" step="0.1" placeholder="Enter your weight">
      </div>
      
      <div class="form-group">
        <label>Body Fat Percentage</label>
        <input type="number" id="progressBodyFat" step="0.1" placeholder="Enter body fat %">
      </div>
      
      <div class="form-group">
        <label>Muscle Mass (kg)</label>
        <input type="number" id="progressMuscle" step="0.1" placeholder="Enter muscle mass">
      </div>
      
      <div class="form-group">
        <label>Notes</label>
        <textarea id="progressNotes" placeholder="How are you feeling? Any achievements?"></textarea>
      </div>
      
      <button type="submit">Save Progress</button>
    </form>
  </div>
</div>

{% endblock %}